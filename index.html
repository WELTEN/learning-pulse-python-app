<!DOCTYPE html>
{% autoescape true %}
<html>
  <head>
    <title>Activity Rating Tool ~ Learning Pulse </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="static/favicon.ico" />
    <link rel="icon" type="image/png" href="static/favicon.png" />
    <link rel="manifest" href="static/manifest.json" />

    <!-- Bootstrap -->
    <link href="static/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="static/bootstrap-slider.css" rel="stylesheet" media="screen">
    <link href="static/bootstrap-switch.css" rel="stylesheet" media="screen">
    <link href="static/custom.css" rel="stylesheet" media="screen">
    <!-- GoRoost -->
    <!--<script src='//cdn.goroost.com/roostjs/kuypylxkqrk0q5izfwxqi23mvrbtsxos' async></script>-->
  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container"> 
        <div id="navbar" class="">
            <div style="float:left;">
              <img src="static/favicon.png" alt="Learning Pulse" style="width:36px; margin:3px 20px 0 0;" />
            </div>
            <a class="navbar-brand" href="/rate">LearningPulse</a>
            <a href="#" class="get-location" onclick="geoFindMe()"><span class="glyphicon glyphicon-map-marker"></span></a>
            <strong class="pull-right" style="margin-top:15px; float:right; color:white;">{{today}}</strong>
            <!--<a href="#" class="btn btn-default" style="margin-top:8px; float:right;">Play</a>-->
        </div><!--/.nav-collapse -->
      </div>
    </nav>
    <div class="container">
      <div class="row">
        <div class="col-lg-12 box-container">
          <!--<h3>Activity Rating Tool</h3><hr>-->
          <div class="panel panel-default">
            <div class="panel-heading"><strong>Active timeframes {{today}}</strong></div>
            <!--<div class="panel-body">
              <p>The latest Learning Activities that you rated.</p>
            </div>-->
            <div class="list-group" id="timeframes-tray">
              <!--{% for rating in ratings %}
              <li class="list-group-item">
                <span class="label label-default"><abbr class="timeago" title="{{rating.date}}">{{rating.date}}</abbr></span>
                 Productivity {{ rating.productivity }}, Stress {{ rating.stress }}, Challenge {{ rating.challenge }}, Abilities {{ rating.abilities }}, Activity {{ rating.activity }}
              </li>
              {% endfor %}-->
              {{ listTimeframes|safe }}
            </div>
          </div>
          <div class="panel panel-default" id="rating-form" class="">
            <div class="panel-heading"><strong>Rate timeframe</strong> <span id="timeframe-display"></span></div>
            <div class="panel-body">
              <form class="form-rating" action="/rate?user={{ dashboard_name }}" method="post">
                  <input type="hidden" value="" name="timeframe" id="timeframe-input" />
                  <input type="hidden" value="" name="latitude" id="latitude-input" />
                  <input type="hidden" value="" name="longitude" id="longitude-input" />
                  <div class="form-group ">
                    <label class="col-lg-3 control-label">Activity</label>
                    <div class="col-lg-9">
                      <span class="help-block">What was the main activity in the chosen timeframe?</span>
                      <div class="radio">
                        <label>
                          <input type="radio" name="activity" value="reading" checked="">
                          Reading
                        </label>
                      </div>
                      <div class="radio">
                        <label>
                          <input type="radio" name="activity" value="writing">
                          Writing
                        </label>
                      </div>
                      <div class="radio">
                        <label>
                          <input type="radio" name="activity" value="meeting">
                          Meeting (online, offline)
                        </label>
                      </div>
                      <div class="radio">
                        <label>
                          <input type="radio" name="activity" value="communicating">
                          Communicating (email, chat)
                        </label>
                      </div>
                      <div class="radio">
                        <label>
                          <input type="radio" name="activity" value="other">
                          Other (lunch, gaming, ...)
                        </label>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="productivity" class="col-lg-3 control-label">Productivity</label>
                    <div class="col-lg-9">
                      <span class="help-block">How productive were you?</span>
                      <input id="productivity" name="productivity" data-slider-id='productivitySlider' type="text" data-slider-min="0" data-slider-max="100" data-slider-step="1" data-slider-value="50"/>
                      <hr>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="stress" class="col-lg-3 control-label">Stress</label>
                    <div class="col-lg-9">
                      <span class="help-block">How stressed did you feel?</span>
                      <input id="stress" name="stress" data-slider-id='stressSlider' type="text" data-slider-min="0" data-slider-max="100" data-slider-step="1" data-slider-value="50" />
                      <hr>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="stress" class="col-lg-3 control-label">Challenge</label>
                    <div class="col-lg-9">
                      <span class="help-block">How challenging was the activity?</span>
                      <input id="challenge" name="challenge" data-slider-id='challengeSlider' type="text" data-slider-min="0" data-slider-max="100" data-slider-step="1" data-slider-value="50" />
                      <hr>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="stress" class="col-lg-3 control-label">Abilities</label>
                    <div class="col-lg-9">
                      <span class="help-block">Howe prepared did you feel for the activity?</span>
                      <input id="abilities" name="abilities" data-slider-id='abilitiesSlider' type="text" data-slider-min="0" data-slider-max="100" data-slider-step="1" data-slider-value="50" />
                      <hr>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-lg-10 col-lg-offset-2 text-right">
                      <!--<button type="reset" class="btn btn-default">Cancel</button>-->
                      <button type="submit" class="btn btn-primary ">Submit</button>
                    </div>
                  </div>       
              </form>
            </div>
          </div>

          
        </div>
      </div>
    <p class="text-center text-white"><strong>LearningPulse</strong> - Welten Institute 2015 - <a href="{{ url|safe }}">{{ url_linktext }}</a></p>
    </div> <!-- /container -->
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="static/bootstrap-switch.js"></script>
    <script src="static/bootstrap-slider.js"></script>
    <script type="text/javascript">
      $('#productivity, #stress, #challenge, #abilities').slider({
        formatter: function(value) {
          return value + '%';
        },
        ticks: [0, 25, 50, 75, 100],
        ticks_labels: ["Very low", "Low", "Fair", "High", "Very high"],
        ticks_snap_bounds: 2

      });
      $('.timeframe-rating').click(function(e){ 
        var tf = $(this).attr("href").replace("#","");
        var tf1 = 1+parseInt(tf,10);
        var tfbadge = "<span class='badge'>"+tf+" - "+tf1+"</span>";
        $("#timeframe-display").html(tfbadge);
        $("#timeframe-input").attr("value",tf);
        $("#rating-form").toggle();
        e.preventDefault();
      });
      if(window.location.hash) {
        var tf = window.location.hash.replace("#","");
        var tf1 = 1+parseInt(tf,10);
        var tfbadge = "<span class='badge'>"+tf+" - "+tf1+"</span>";
        $("#timeframe-display").html(tfbadge);
        $("#timeframe-input").attr("value",tf);
      } else {
        $("#rating-form").hide();
      }
      // Default Lat, Long
      var def_lat = 50;//50.8779846;
      var def_long = 5;//5.9582749;
      function geoFindMe() {
        if (navigator.geolocation) {
         navigator.geolocation.getCurrentPosition(getPosition,errors);         
        } else { //In case browser doesn't support geolocation set the default values 
            user_lat  = def_lat;
            user_long = def_long; 
        }
      }
      function getPosition(position) {
          user_lat  = position.coords.latitude;
          user_long = position.coords.longitude; 
          $("#latitude-input").attr("value",user_lat);
          $("#longitude-input").attr("value",user_long);
      }
      function errors(error_code) {
        switch(error.code) {
         case error.PERMISSION_DENIED:
         FAIL("PERMISSION_DENIED");
         break;
         
         case error.POSITION_UNAVAILABLE:
         FAIL("POSITION_UNAVAILABLE");
           break;
         
         case error.TIMEOUT:
         FAIL("TIMEOUT");
           break;
         
         case error.UNKNOWN_ERROR:
         FAIL("UNKNOWN_ERROR");
           break;
        }
        return;
      }
    </script>
  </body>
</html>
</html>
{% endautoescape %}
